CREATE SCHEMA caoputacao;

/*select NOME_BANDA, NOME_GRAVADORA FROM GRAVADORA G JOIN banda B ON G.ID_GRAVADORA= B.GRAVADORA_ID_GRAVADORA;
USE GRAVADORA;*/

CREATE TABLE caoputacao.PRODUTOS(
ID_PRODUTO INT AUTO_INCREMENT NOT NULL,
NOME_PRODUTO VARCHAR(100) NOT NULL,
PRECO_PRODUTO decimal(10,2) NOT NULL,
CONSTRAINT PK_PRODUTOS PRIMARY KEY(ID_PRODUTO));

CREATE TABLE caoputacao.FUNCIONARIOS(
ID_FUNCIONARIO INT AUTO_INCREMENT  NOT NULL,
NOME_FUNCIONARIO VARCHAR(100) NOT NULL,
TELEFONE_FUNCIONARIO VARCHAR(20) NOT NULL,
SALARIO_FUNCIONARIO decimal(10,2) NOT NULL,
CONSTRAINT PK_FUNCIONARIOS PRIMARY KEY(ID_FUNCIONARIO));

CREATE TABLE caoputacao.CLIENTES(
CPF_CLIENTE INT NOT NULL,
NOME_CLIENTE VARCHAR(100) NOT NULL,
TELEFONE_CLIENTE VARCHAR(20) NOT NULL,
ID_FUNCIONARIO INT NOT NULL,
CONSTRAINT PK_CLIENTE PRIMARY KEY(CPF_CLIENTE),
CONSTRAINT FK_ID_FUNCIONARIO FOREIGN KEY(ID_FUNCIONARIO) REFERENCES caoputacao.FUNCIONARIOS(ID_FUNCIONARIO));


CREATE TABLE caoputacao.CLIENTES_PRODUTOS (
CPF_CLIENTE INT NOT NULL,
ID_PRODUTO INT NOT NULL,
PRIMARY KEY (CPF_CLIENTE, ID_PRODUTO),
CONSTRAINT FK_CLIENTE_TEM_PRODUTO
FOREIGN KEY (CPF_CLIENTE)
REFERENCES caoputacao.CLIENTES (CPF_CLIENTE),
CONSTRAINT FK_CLIENTE_TEM_PRODUTO1
FOREIGN KEY (ID_PRODUTO)
REFERENCES caoputacao.PRODUTOS (ID_PRODUTO));
/* select * FROM BANDA join GRAVADORA; */

CREATE TABLE caoputacao.ANIMAIS(
ID_ANIMAL INT AUTO_INCREMENT  NOT NULL,
NOME_ANIMAL VARCHAR(100) NOT NULL,
RACA_ANIMAL VARCHAR(100) NOT NULL,
PRECO_SERVICO_ANIMAL decimal(10,2) NOT NULL,
CPF_CLIENTE INT NOT NULL,
CONSTRAINT PK_ANIMAL PRIMARY KEY(ID_ANIMAL),
CONSTRAINT FK_CPF_CLIENTE FOREIGN KEY(CPF_CLIENTE) REFERENCES caoputacao.CLIENTES(CPF_CLIENTE));

CREATE TABLE caoputacao.CONTATO(
ID_CONTATO INT AUTO_INCREMENT NOT NULL,
ENDERECO VARCHAR(100) NOT NULL,
TELEFONE VARCHAR(20) NOT NULL,
EMAIL VARCHAR(100) NOT NULL,
CONSTRAINT PK_CONTATO PRIMARY KEY(ID_CONTATO));


INSERT INTO caoputacao.PRODUTOS (NOME_PRODUTO, PRECO_PRODUTO) VALUES ('SHAMPOO', '9.99');
INSERT INTO caoputacao.FUNCIONARIOS (NOME_FUNCIONARIO, TELEFONE_FUNCIONARIO, SALARIO_FUNCIONARIO) VALUES ('ALICE', '081988664352', '100');
INSERT INTO caoputacao.CLIENTES (CPF_CLIENTE, NOME_CLIENTE, TELEFONE_CLIENTE, ID_FUNCIONARIO) VALUES ('123', 'AMANDA', '81986877109', '1');
INSERT INTO caoputacao.ANIMAIS (NOME_ANIMAL, RACA_ANIMAL, PRECO_SERVICO_ANIMAL, CPF_CLIENTE) VALUES ('PLUTO', 'CHIWAWA', '80.50', '123');
INSERT INTO caoputacao.CLIENTES_PRODUTOS (CPF_CLIENTE, ID_PRODUTO) VALUES ('123', '1');
INSERT INTO caoputacao.CONTATO (ENDERECO, TELEFONE, EMAIL) VALUES ('RUA 123', '08133456789', '100');
INSERT INTO caoputacao.CONTATO (ENDERECO, TELEFONE, EMAIL) VALUES ('RUA 312', '837492875', 'jhfkjbf');


SELECT C.*, A.PRECO_SERVICO_ANIMAL, P.PRECO_PRODUTO FROM caoputacao.CLIENTES C, caoputacao.ANIMAIS A, caoputacao.CLIENTES_PRODUTOS CP, CAOPUTACAO.PRODUTOS P WHERE A.CPF_CLIENTE = C.CPF_CLIENTE AND C.CPF_CLIENTE = CP.CPF_CLIENTE AND P.ID_PRODUTO = CP.ID_PRODUTO;

select * from caoputacao.produtos;

select * from caoputacao.clientes;

/*SELECT * FROM MUSICA M
LEFT JOIN ALBUMS A ON A.ID_ALBUM = M.FK_ALBUMS
LEFT JOIN BANDA B ON B.ID_BANDA = A.BANDA_ID_BANDA
LEFT JOIN GRAVADORA G ON B.GRAVADORA_ID_GRAVADORA = G.ID_GRAVADORA
LEFT JOIN GENERO GE ON M.FK_GENERO = GE.ID_GENERO;*/


